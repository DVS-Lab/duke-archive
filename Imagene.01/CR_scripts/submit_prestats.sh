#!/bin/bash

SUBJECTS=( 20080721_47725 20080723_47729 20080723_47731 20080724_47734 20080725_47735 20080728_47737 20080805_47748 20080812_47752 20081007_47851 20081016_47863 20081022_47878 20081024_47885 20081105_47917 20081106_47921 20081120_47945 20081203_47977 20081217_48012 20090126_48061 20090127_48066 20090203_48090 20090205_48097 20090205_48100 20090206_48103 20090209_48105 20090210_48112 20090212_48123 20090213_48129 20090218_48145 20090219_48150 20090219_48152 20090220_48156 20090220_48158 20090223_48160 20090224_48165 20090224_48167 20090225_48172 20090226_48176 20090226_48179 20090227_48184 20090303_48187 20090303_48189 20090304_48193 20090304_48196 20090305_48197 20090306_48204 20090306_48206 20090313_48232 20090323_48271 20090325_48281 20090326_48288 20090330_48297 20090331_48301 20090401_48309 20090401_48312 20090403_48321 20090406_48326 20090406_48327 20090407_48330 20090408_48335 20090408_48337 20090408_48339 20090409_48344 20090409_48349 20090410_48350 20090410_48351 )


LENGTH=${#SUBJECTS[@]}
echo $LENGTH
let LENGTH=$LENGTH-1
echo $LENGTH

N=0
for x in `seq 0 $LENGTH`; do
	
	
	SUBJ_FULL=${SUBJECTS[$x]}
	SUBJ=${SUBJ_FULL:9}



	
	GO=1
	SMOOTH=6
	for TASK in "Framing" "Resting" "MID" "Gambling"; do
	
		if [ "$TASK" == "Resting" ]; then
			RUNS=1
		else
			RUNS=3
		fi

		for RUN in `seq $RUNS`; do

			qsub -v EXPERIMENT=Imagene.01 prestats_1run_stcFIX.sh $SUBJ $RUN $SMOOTH $TASK $GO
			#echo "qsub -v EXPERIMENT=Imagene.01 L1_resting.sh $SUBJ $ROI $GO"

			let N=$N+1
			if [ $N -eq 200 ]; then
				sleep 20m
				N=0
			fi
		done

	done
done